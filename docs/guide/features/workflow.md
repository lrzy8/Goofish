# 工作流

路由：`/workflow`

![工作流](/screenshots/workflow.png)

可视化发货流程编辑器，基于 simple-mind-map 思维导图组件。

## 功能

### 流程列表

显示所有发货流程：
- 流程名称
- 描述
- 是否默认流程
- 创建/更新时间

### 流程编辑器

基于思维导图的可视化编辑器：
- 拖拽调整节点位置
- 缩放和平移画布
- 支持触摸操作（移动端）

## 节点类型

| 类型 | 颜色 | 说明 |
|------|------|------|
| 触发器 | 紫色 | 流程入口，订单触发时开始执行 |
| 发货 | 绿色 | 执行发货操作 |
| 延迟 | 蓝色 | 等待指定时间后继续 |
| 条件 | 黄色 | 条件判断，分支执行 |
| 消息 | 青色 | 发送消息给买家 |
| 提示 | 橙色 | 发送提示消息 |

## 节点操作

### 添加节点

1. 选中一个节点
2. 点击工具栏的节点类型按钮
3. 选择「添加子节点」或「添加兄弟节点」

### 添加条件分支

点击「条件分支」按钮自动创建：
- 条件判断节点
- IF 分支（条件成立）
- ELSE 分支（条件不成立）

### 删除节点

选中节点后点击「删除」按钮。

::: warning 注意
根节点（触发器）不能删除。
:::

### 画布操作

| 操作 | 说明 |
|------|------|
| 放大 | 放大画布视图 |
| 缩小 | 缩小画布视图 |
| 重置 | 恢复默认视图 |
| 滚轮 | 缩放画布 |
| 拖拽 | 移动画布或节点 |

## 节点配置

选中节点后在右侧面板配置：

### 通用配置

- 节点名称
- 节点类型

### 发货节点

- 发货模式：虚拟发货/实物发货
- 发货内容

### 延迟节点

- 延迟模式：固定时间/随机时间
- 延迟时长（支持秒/分钟/小时）
- 随机范围（随机模式）

### 条件节点

- 条件表达式
- 关键词匹配
- 匹配模式：包含/精确/正则

### 消息节点

- 消息内容

### 提示节点

- 提示消息内容

## 默认流程

- 每个系统只能有一个默认流程
- 自动发货规则未指定流程时使用默认流程
- 默认流程不能删除
